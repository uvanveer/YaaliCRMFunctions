void automation.discount_update(Int SOID)
{
getrec = zoho.crm.getRecordById("Sales_Orders",SOID);
productdetails = getrec.getJSON("Product_Details");
temp = 0;
update = Map();
for each  product in productdetails
{
	getdiscount = product.getJSON("Discount");
	if(getdiscount > 0)
	{
		temp = temp + getdiscount;
		update.put("Discount",temp);
	}
	else
	{
		info "discount is 0";
	}
}
response = zoho.crm.updateRecord("Sales_Orders",SOID,update);
allitems = list();
for each  product in productdetails
{
	upd = Map();
	upd.put("id",product.get("id"));
	upd.put("Discount",0);
	allitems.add(upd);
}
info allitems;
update_map = Map();
update_map.put("Product_Details",allitems);
update_rec = zoho.crm.updateRecord("Sales_Orders",SOID,update_map);
info update_rec;
}